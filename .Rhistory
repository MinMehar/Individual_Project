scale_color_manual(values=c('purple', 'red'))
db_scatter
ggsave(
here::here("output/scp_db.png"),
plot = db_scatter,
device = "png"
)
#create scatterplot with decision boundary among risk prediction for
#uterine cancer patients
db_scatter <-
ggplot(SNL_data_1, aes(Patient_Age, Tumor_Size)) +
geom_point(aes(colour = factor(Risk))) +
labs(colour = 'Risk Prediction') +
geom_abline(intercept = 0, slope = 1) + xlab("Patient Age") + ylab("Tumor Size") +
scale_color_manual(values=c('purple', 'red')) +
scale_fill_discrete(labels = c('Medium Risk', 'High Risk'))
db_scatter
ggplot(SNL_data_1, aes(Patient_Age, Tumor_Size)) +
geom_point(aes(colour = factor(Risk))) +
labs(colour = 'Risk Prediction') +
geom_abline(intercept = 0, slope = 1) + xlab("Patient Age") + ylab("Tumor Size") +
scale_color_manual(values=c('purple', 'red')) +
scale_fill_discrete(labels = c('Medium Risk', 'High Risk'))
#create scatterplot with decision boundary among risk prediction for
#uterine cancer patients
db_scatter <-
ggplot(SNL_data_1, aes(Patient_Age, Tumor_Size)) +
geom_point(aes(colour = factor(Risk))) +
labs(colour = 'Risk Prediction') +
geom_abline(intercept = 0, slope = 1) + xlab("Patient Age") + ylab("Tumor Size") +
scale_color_manual(values=c('purple', 'red')) + scale_fill_discrete(labels = c('Medium Risk', 'High Risk'))
db_scatter
#create scatterplot with decision boundary among risk prediction for
#uterine cancer patients
db_scatter <-
ggplot(SNL_data_1, aes(Patient_Age, Tumor_Size)) +
geom_point(aes(colour = factor(Risk))) +
labs(colour = 'Risk Prediction') +
geom_abline(intercept = 0, slope = 1) + xlab("Patient Age") + ylab("Tumor Size") +
scale_color_manual(values=c('purple', 'red')) +
scale_fill_discrete(labels = c("Medium Risk", "High Risk"))
db_scatter
#load ggplot
library(ggplot2)
#read in data
SNL_data_1 <-read.csv("orig_data/SNL_Harvard_1.csv", header=TRUE)
#create scatterplot with decision boundary among risk prediction for
#uterine cancer patients
db_scatter <-
ggplot(SNL_data_1, aes(Patient_Age, Tumor_Size)) +
geom_point(aes(colour = factor(Risk))) +
labs(colour = 'Risk Prediction') +
geom_abline(intercept = 0, slope = 1) + xlab("Patient Age") + ylab("Tumor Size") +
scale_color_manual(values=c('purple', 'red')) +
scale_fill_discrete(labels = c("Medium Risk", "High Risk"))
db_scatter
#create scatterplot with decision boundary among risk prediction for
#uterine cancer patients
db_scatter <-
ggplot(SNL_data_1, aes(Patient_Age, Tumor_Size)) +
geom_point(aes(colour = factor(Risk))) +
labs(colour = 'Risk Prediction') +
geom_abline(intercept = 0, slope = 1) + xlab("Patient Age") + ylab("Tumor Size") +
scale_color_manual(values=c('purple', 'red')) +
scale_fill_discrete(labels=c("Medium Risk", "High Risk"))
db_scatter
#load ggplot
library(ggplot2)
#load ggplot
library(ggplot2)
scatter <- ggplot(SNL_data_1, aes(Patient_Age, Tumor_Size)) +
geom_point(aes(colour = factor(Risk))) +
labs(colour = 'Risk Prediction') +
scale_fill_discrete(labels=c("Medium Risk", "High Risk"))
scatter
ggsave(
here::here("output/scp_db.png"),
plot = db_scatter,
device = "png"
)
class(SNL_data_1$Tumor_Size)
here::i_am("code/decision_boundary.R")
SNL_data_1 <-read.csv("orig_data/SNL_Harvard_1.csv", header=TRUE)
require(boot)
SNL_data_1$Risk <- as.numeric(SNL_data_1$Risk)
maximum_1 <- max(SNL_data_1$Patient_Age)
maximum_2 <- max(SNL_data_1$Tumor_Size)
SNL_data_1$Patient_Age_rescale <- SNL_data_1$Patient_Age/maximum_1
SNL_data_1$Tumor_Size_rescale <- SNL_data_1$Tumor_Size/maximum_2
cost = function(y,yhat) {
if(y==1) cost = -log(yhat)
if(y==0) cost = -log(1-yhat)
cost
}
J = function(theta0, theta1,theta2, m, x1,x2, y){
## inv.logit is the sigmoid function in the "boot" package ##
yhat = inv.logit(theta0 + theta1*x1 + theta2*x2)
sum_cost = (1/m)*sum(mapply(FUN=cost,y,yhat))
sum_cost
}
x1=admissions$exam1_rs
x1=SNL_data_1$Patient_Age_rescale
x2=SNL_data_1$Tumor_Size_rescale
y=SNL_data_1$Risk
m=nrow(SNL_data_1)
convg_threshold = .0001
alpha = .01
#create scatterplot with decision boundary among risk prediction for
#uterine cancer patients
db_scatter <-
ggplot(SNL_data_1, aes(Patient_Age, Tumor_Size)) +
geom_point(aes(colour = factor(Risk))) +
labs(colour = 'Risk Prediction') +
geom_abline(intercept = 0, slope = 1) + xlab("Patient Age") + ylab("Tumor Size") +
scale_color_manual(values=c('purple', 'red')) +
scale_fill_discrete(labels=c("Medium Risk", "High Risk"))
db_scatter
convg_threshold = .0001
alpha = .01
initial_theta0 = -10
initial_theta1 = 1
initial_theta2 = 1
current_theta0 = initial_theta0
current_theta1 = initial_theta1
current_theta2 = initial_theta2
theta0_values = c(current_theta0) # a vector to store updated theta0 values during iterations
theta1_values = c(current_theta1) # a vector to store updated theta1 values during iterations
theta2_values = c(current_theta2) # a vector to store updated theta1 values during iterations
initial_J = J(initial_theta0, initial_theta1, initial_theta2, m, x1, x2, y)
current_J = initial_J
J_values = c(initial_J) # a vector to store cost function values during iterations
dJ0 = function(theta0, theta1, theta2, m, x1,x2, y){
yhat= inv.logit(theta0 + theta1*x1 + theta2*x2)
(1/m)*sum((yhat-y)*1)
}
dJ1 = function(theta0, theta1, theta2, m, x1,x2, y){
yhat= inv.logit(theta0 + theta1*x1 + theta2*x2)
(1/m)*sum((yhat-y)*x1)
}
dJ2 = function(theta0, theta1, theta2, m, x1,x2, y){
yhat= inv.logit(theta0 + theta1*x1 + theta2*x2)
(1/m)*sum((yhat-y)*x2)
}
delta_J = 10 # an arbitrary value to start the algorithm
while (delta_J >.0001) {
new_theta0 = current_theta0 - alpha*dJ0(current_theta0, current_theta1, current_theta2, m, x1, x2, y )
new_theta1 = current_theta1 - alpha*dJ1(current_theta0, current_theta1, current_theta2, m, x1, x2, y )
new_theta2 = current_theta2 - alpha*dJ2(current_theta0, current_theta1, current_theta2, m, x1, x2, y )
new_J = J(new_theta0, new_theta1, new_theta2, m, x1, x2, y)
theta0_values = c(theta0_values, new_theta0)
theta1_values = c(theta1_values, new_theta1)
theta2_values = c(theta2_values, new_theta2)
J_values = c(J_values, new_J)
delta_J = abs(new_J - current_J)
current_J = new_J
current_theta0 = new_theta0
current_theta1 = new_theta1
current_theta2 = new_theta2
}
print(new_theta0)
print(new_theta1)
print(new_theta2)
#create scatterplot with decision boundary among risk prediction for
#uterine cancer patients
db_scatter <-
ggplot(SNL_data_1, aes(Patient_Age, Tumor_Size)) +
geom_point(aes(colour = factor(Risk))) +
labs(colour = 'Risk Prediction') +
geom_abline(intercept = 10, slope = -1) + xlab("Patient Age") + ylab("Tumor Size") +
scale_color_manual(values=c('purple', 'red')) +
scale_fill_discrete(labels=c("Medium Risk", "High Risk"))
db_scatter
#create scatterplot with decision boundary among risk prediction for
#uterine cancer patients
db_scatter <-
ggplot(SNL_data_1, aes(Patient_Age, Tumor_Size)) +
geom_point(aes(colour = factor(Risk))) +
labs(colour = 'Risk Prediction') +
geom_abline(intercept = 8, slope = -1) + xlab("Patient Age") + ylab("Tumor Size") +
scale_color_manual(values=c('purple', 'red')) +
scale_fill_discrete(labels=c("Medium Risk", "High Risk"))
db_scatter
#create scatterplot with decision boundary among risk prediction for
#uterine cancer patients
db_scatter <-
ggplot(SNL_data_1, aes(Patient_Age, Tumor_Size)) +
geom_point(aes(colour = factor(Risk))) +
labs(colour = 'Risk Prediction') +
geom_abline(intercept = 1, slope = -1) + xlab("Patient Age") + ylab("Tumor Size") +
scale_color_manual(values=c('purple', 'red'))
db_scatter
#create scatterplot with decision boundary among risk prediction for
#uterine cancer patients
db_scatter <-
ggplot(SNL_data_1, aes(Patient_Age, Tumor_Size)) +
geom_point(aes(colour = factor(Risk))) +
labs(colour = 'Risk Prediction') +
geom_abline(intercept = 0, slope = -1) + xlab("Patient Age") + ylab("Tumor Size") +
scale_color_manual(values=c('purple', 'red'))
db_scatter
#create scatterplot with decision boundary among risk prediction for
#uterine cancer patients
db_scatter <-
ggplot(SNL_data_1, aes(Patient_Age, Tumor_Size)) +
geom_point(aes(colour = factor(Risk))) +
labs(colour = 'Risk Prediction') +
geom_abline(intercept = 0, slope = -1) + xlab("Patient Age") + ylab("Tumor Size") +
scale_color_manual(values=c('purple', 'red'))
db_scatter
#create scatterplot with decision boundary among risk prediction for
#uterine cancer patients
db_scatter <-
ggplot(SNL_data_1, aes(Patient_Age, Tumor_Size)) +
geom_point(aes(colour = factor(Risk))) +
labs(colour = 'Risk Prediction') +
geom_abline(intercept = 0, slope = 1) + xlab("Patient Age") + ylab("Tumor Size") +
scale_color_manual(values=c('purple', 'red'))
db_scatter
#create scatterplot with decision boundary among risk prediction for
#uterine cancer patients
db_scatter <-
ggplot(SNL_data_1, aes(Patient_Age, Tumor_Size)) +
geom_point(aes(colour = factor(Risk))) +
labs(colour = 'Risk Prediction') +
geom_abline(intercept = 6, slope = -1) +
xlab("Patient Age") + ylab("Tumor Size") +
scale_color_manual(values=c('purple', 'red'))
db_scatter
#create scatterplot with decision boundary among risk prediction for
#uterine cancer patients
db_scatter <-
ggplot(SNL_data_1, aes(Patient_Age, Tumor_Size)) +
geom_point(aes(colour = factor(Risk))) +
labs(colour = 'Risk Prediction') +
geom_abline(intercept = 8.2, slope = -1) +
xlab("Patient Age") + ylab("Tumor Size") +
scale_color_manual(values=c('purple', 'red'))
db_scatter
ggsave(
here::here("output/scp_db.png"),
plot = db_scatter,
device = "png"
)
here::i_am("code/01_uterine_table.R")
#read in data
SNL_data_1 <-read.csv("orig_data/SNL_Harvard_1.csv", header=TRUE)
library(labelled)
library(gtsummary)
#create table
SNL_table1 <-
var_label(SNL_data_1) <- list(
No = "ID",
Size_of_the_tumor = "Tumor Size",
Patient_Age = "Patient Age",
Lymph_node_Location = "Location of Lymph Node",
Final_resection_Dx = "Grade of Uterine Cancer"
)
SNL_data_1$SNL_number <- ifelse(SNL_data_1$Size_of_the_tumor < 2, "< 2", ">= 2")
SNL_data_1 |>
select("Lymph_node_Location", "SNL_number") |>
tbl_summary(by = SNL_number) |>
modify_spanning_header(c("stat_1", "stat_2") ~ "**Tumor Size**") |>
add_overall() |>
add_p()
saveRDS(SNL_data_1, file = here::here("output", "uterine_data.rds"))
here::i_am("code/uterine_db_scatter.R")
#load ggplot
library(ggplot2)
#create scatterplot with decision boundary among risk prediction for
#uterine cancer patients
db_scatter <-
ggplot(uterine_data, aes(Patient_Age, Tumor_Size)) +
geom_point(aes(colour = factor(Risk))) +
labs(colour = 'Risk Prediction') +
geom_abline(intercept = 8.2, slope = -1) +
xlab("Patient Age") + ylab("Tumor Size") +
scale_color_manual(values=c('purple', 'red'))
#read in data
SNL_data_1 <- readRDS(file = here::here("output/uterine_data.rds"))
#create scatterplot with decision boundary among risk prediction for
#uterine cancer patients
db_scatter <-
ggplot(SNL_data_1, aes(Patient_Age, Tumor_Size)) +
geom_point(aes(colour = factor(Risk))) +
labs(colour = 'Risk Prediction') +
geom_abline(intercept = 8.2, slope = -1) +
xlab("Patient Age") + ylab("Tumor Size") +
scale_color_manual(values=c('purple', 'red'))
db_scatter
ggsave(
here::here("output/scp_db.png"),
plot = db_scatter,
device = "png"
)
here::i_am("code/01_uterine_table.R")
#read in data
SNL_data_1 <-read.csv("orig_data/SNL_Harvard_1.csv", header=TRUE)
library(labelled)
library(gtsummary)
#create table
SNL_table1 <-
var_label(SNL_data_1) <- list(
No = "ID",
Size_of_the_tumor = "Tumor Size",
Patient_Age = "Patient Age",
Lymph_node_Location = "Location of Lymph Node",
Final_resection_Dx = "Grade of Uterine Cancer"
)
SNL_data_1$SNL_number <- ifelse(SNL_data_1$Size_of_the_tumor < 2, "< 2", ">= 2")
SNL_data_1 |>
select("Lymph_node_Location", "SNL_number") |>
tbl_summary(by = SNL_number) |>
modify_spanning_header(c("stat_1", "stat_2") ~ "**Tumor Size**") |>
add_overall() |>
add_p()
here::i_am("code/01_uterine_table.R")
#read in data
SNL_data_1 <-read.csv("orig_data/SNL_Harvard_1.csv", header=TRUE)
library(labelled)
library(gtsummary)
#create table
SNL_table1 <-
var_label(SNL_data_1) <- list(
No = "ID",
Size_of_the_tumor = "Tumor Size",
Patient_Age = "Patient Age",
Lymph_node_Location = "Location of Lymph Node",
Final_resection_Dx = "Grade of Uterine Cancer"
)
SNL_data_1$SNL_number <- ifelse(SNL_data_1$Size_of_the_tumor < 2, "< 2", ">= 2")
here::i_am("code/01_uterine_table.R")
#read in data
SNL_data_1 <-read.csv("orig_data/SNL_Harvard_1.csv", header=TRUE)
library(labelled)
library(gtsummary)
#create table
SNL_table1 <-
var_label(SNL_data_1) <- list(
No = "ID",
Size_of_the_tumor = "Tumor Size",
Patient_Age = "Patient Age",
Lymph_node_Location = "Location of Lymph Node",
Final_resection_Dx = "Grade of Uterine Cancer"
)
SNL_data_1$SNL_number <- ifelse(SNL_data_1$Size_of_the_tumor < 2, "< 2", ">= 2")
SNL_gtab |>
select("Lymph_node_Location", "SNL_number") |>
tbl_summary(by = SNL_number) |>
modify_spanning_header(c("stat_1", "stat_2") ~ "**Tumor Size**") |>
add_overall() |>
add_p()
SNL_data_1 |>
select("Lymph_node_Location", "SNL_number") |>
tbl_summary(by = SNL_number) |>
modify_spanning_header(c("stat_1", "stat_2") ~ "**Tumor Size**") |>
add_overall() |>
add_p()
saveRDS(SNL_data_1, file = here::here("output", "uterine_data.rds"))
SNL_gtab <- SNL_data_1 |>
select("Lymph_node_Location", "SNL_number") |>
tbl_summary(by = SNL_number) |>
modify_spanning_header(c("stat_1", "stat_2") ~ "**Tumor Size**") |>
add_overall() |>
add_p()
saveRDS(SNL_data_1, file = here::here("output", "uterine_data.rds"))
saveRDS(SNL_gtab, file = here::here("output", "uterine_table.rds"))
here::i_am("code/02_uterine_table.R")
SNL_data_1 <- readRDS(file = here::here("output/uterine_data.rds"))
SNL_gtab2 <- SNL_data_1 |>
select("SNL_number", "Final_resection_Dx") |>
tbl_summary(by = SNL_number) |>
modify_spanning_header(c("stat_1", "stat_2") ~ "**Tumor Size**") |>
add_overall() |>
add_p()
saveRDS(SNL_gtab2, file = here::here("output", "uterine_table_2.rds"))
here::i_am("code/01_uterine_lnl.R")
#read in data
SNL_data_1 <-read.csv("orig_data/SNL_Harvard_1.csv", header=TRUE)
library(labelled)
library(gtsummary)
#create table
SNL_table1 <-
var_label(SNL_data_1) <- list(
No = "ID",
Size_of_the_tumor = "Tumor Size",
Patient_Age = "Patient Age",
Lymph_node_Location = "Location of Lymph Node",
Final_resection_Dx = "Grade of Uterine Cancer"
)
SNL_data_1$SNL_number <- ifelse(SNL_data_1$Size_of_the_tumor < 2, "< 2", ">= 2")
SNL_gtab <- SNL_data_1 |>
select("Lymph_node_Location", "SNL_number") |>
tbl_summary(by = SNL_number) |>
modify_spanning_header(c("stat_1", "stat_2") ~ "**Tumor Size**") |>
add_overall() |>
add_p()
saveRDS(SNL_data_1, file = here::here("output", "uterine_data.rds"))
saveRDS(SNL_gtab, file = here::here("output", "uterine_table.rds"))
here::i_am("code/02_fico_grade.R")
SNL_data_1 <- readRDS(file = here::here("output/uterine_data.rds"))
SNL_gtab2 <- SNL_data_1 |>
select("SNL_number", "Final_resection_Dx") |>
tbl_summary(by = SNL_number) |>
modify_spanning_header(c("stat_1", "stat_2") ~ "**Tumor Size**") |>
add_overall() |>
add_p()
saveRDS(SNL_gtab2, file = here::here("output", "uterine_table_2.rds"))
here::i_am("code/02_fico_grade.R")
SNL_data_1 <- readRDS(file = here::here("output/uterine_data.rds"))
SNL_gtab3 <- SNL_data |>
select("SNL_number", "Patient_Age") |>
tbl_summary(by = SNL_number) |>
modify_spanning_header(c("stat_1", "stat_2") ~ "**Tumor Size**") |>
add_overall() |>
add_p()
here::i_am("code/02_fico_grade.R")
SNL_data_1 <- readRDS(file = here::here("output/uterine_data.rds"))
SNL_gtab3 <- SNL_data_1 |>
select("SNL_number", "Patient_Age") |>
tbl_summary(by = SNL_number) |>
modify_spanning_header(c("stat_1", "stat_2") ~ "**Tumor Size**") |>
add_overall() |>
add_p()
saveRDS(SNL_gtab3, file = here::here("output", "uterine_table_3.rds"))
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
#load Harvard Dataset
here::i_am("SNL_Final.Rmd")
getwd()
getwd()
getwd()
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
#load Harvard Dataset
here::i_am("SLN_Final.Rmd")
mkdir graphics
knitr::include_graphics(here::here("graphics/Lymph_Drainage.png") )
knitr::include_graphics(here::here("graphics/Lymph_Drainage.png") )
knitr::include_graphics(here::here("graphics/SLN_procedure.png") )
knitr::include_graphics(here::here("graphics/Location_freq_SLN.png") )
readRDS(file = here::here("output/uterine_table.rds"))
readRDS(file = here::here("output/uterine_table_2.rds"))
readRDS(file = here::here("output/uterine_table_3.rds"))
knitr::include_graphics( here::here("output/scp_db.png") )
knitr::include_graphics( here::here("output/scp_db.png") )
here::i_am("code/uterine_db_scatter.R")
#load ggplot
library(ggplot2)
#read in data
SNL_data_1 <- readRDS(file = here::here("output/uterine_data.rds"))
#create scatterplot with decision boundary among risk prediction for
#uterine cancer patients
db_scatter <-
ggplot(SNL_data_1, aes(Patient_Age, Tumor_Size)) +
geom_point(aes(colour = factor(Risk))) +
labs(colour = 'Risk Prediction') +
xlab("Patient Age") + ylab("Tumor Size") +
scale_color_manual(values=c('purple', 'red'))
db_scatter
#create scatterplot with decision boundary among risk prediction for
#uterine cancer patients
db_scatter <-
ggplot(SNL_data_1, aes(Patient_Age, Tumor_Size)) +
geom_point(aes(colour = factor(Risk))) +
labs(colour = 'Risk Prediction') +
xlab("Patient Age") + ylab("Tumor Size") +
geom_abline(slope, intercept) +
scale_color_manual(values=c('purple', 'red'))
#create scatterplot with decision boundary among risk prediction for
#uterine cancer patients
db_scatter <-
ggplot(SNL_data_1, aes(Patient_Age, Tumor_Size)) +
geom_point(aes(colour = factor(Risk))) +
labs(colour = 'Risk Prediction') +
xlab("Patient Age") + ylab("Tumor Size") +
geom_smooth(method = "lm", se = FALSE) +
scale_color_manual(values=c('purple', 'red'))
db_scatter
ggsave(
here::here("output/scp_db.png"),
plot = db_scatter,
device = "png"
)
#create scatterplot with decision boundary among risk prediction for
#uterine cancer patients
db_scatter <-
ggplot(SNL_data_1, aes(Patient_Age, Tumor_Size)) +
geom_point(aes(colour = factor(Risk))) +
labs(colour = 'Risk Prediction') +
xlab("Patient Age") + ylab("Tumor Size") +
geom_smooth(method = "lm", se = FALSE, col = "black") +
scale_color_manual(values=c('purple', 'red'))
db_scatter
#create scatterplot with decision boundary among risk prediction for
#uterine cancer patients
db_scatter <-
ggplot(SNL_data_1, aes(Patient_Age, Tumor_Size)) +
geom_point(aes(colour = factor(Risk))) +
labs(colour = 'Risk Prediction') +
xlab("Patient Age") + ylab("Tumor Size") +
geom_smooth(method = "lm", se = FALSE, col = "green") +
scale_color_manual(values=c('purple', 'red'))
db_scatter
ggsave(
here::here("output/scp_db.png"),
plot = db_scatter,
device = "png"
)
---
title: "Uterine Pathological Features and Their Association with Sentinel Lymph Node Status Among Endometrial and Uterine Cancer"
here::i_am("render_report.R")
#render the report
rmarkdown::render(here::here("SLN_Final.Rmd"))
getwd()
